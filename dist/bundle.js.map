{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bundle.js","webpack:///webpack/bootstrap c63030b019b8d34412b7","webpack:///./src/index.js","webpack:///./src/lib/lib.js","webpack:///./src/hack.js","webpack:///./src/lib/ajax.js","webpack:///./src/lib/format.js","webpack:///./src/lib/lint.js","webpack:///./src/md5.js","webpack:///./src/upload-html.js","webpack:///./src/upload-swf.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","lib","lint","hack","uploadHtml","uploadSwf","upload","config","conf","uploadUrl","type","method","fileName","min","max","credentials","isMultiple","beforeUpload","fn","res","console","log","progress","extends","dom","document","querySelector","window","File","source","target","k","isObject","clone","obj","o","Array","i","len","length","push","j","queryString","object","key","val","data","hasOwnProperty","encodeURIComponent","join","getRandomString","$chars","maxPos","pwd","charAt","Math","floor","random","getWidth","offsetWidth","getHeight","offsetHeight","prepend","html","innerHTML","css","sty","newSty","style","success","file","error","lintFile","url","xhr","XMLHttpRequest","onprogress","event","lengthComputable","percentComplete","total","open","setRequestHeader","withCredentials","onreadystatechange","e","readyState","status","JSON","parse","response","responseText","send","typeFormat","typeArray","forEach","item","index","sizeFormat","size","parseFloat","unit","hihgUnit","unitUp","parseInt","hex_sha1","s","binb2hex","core_sha1","str2binb","chrsz","x","w","a","b","d","olda","oldb","oldc","oldd","olde","rol","t","safe_add","sha1_ft","sha1_kt","y","lsw","msw","num","cnt","str","bin","mask","charCodeAt","binarray","hex_tab","hexcase","ajax","result","errorType","name","split","pop","toLowerCase","indexOf","uploadAjax","formData","FormData","append","isMulti","input","uploadDom","addEventListener","files","errors","value","uploader","file_size_limit","format","file_post_name","file_types","upload_progress_handler","button_placeholder_id","apply","arguments","create","loading","initList","resBase","setting","flash_url","prevent_swf_caching","button_text","button_image_url","fnLoadScript","src","fun","head","getElementsByTagName","documentElement","script","createElement","setAttribute","attachEvent","r","onload","appendChild","fnInit","$dom","height","width","Date","_setting","upload_url","button_width","button_height","button_cursor","SWFUpload","CURSOR","HAND","button_window_mode","WINDOW_MODE","TRANSPARENT","upload_start_handler","settings","file_dialog_complete_handler","startUpload","file_queue_error_handler","upload_success_handler","paramsConfig"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"match\"] = factory();\n\telse\n\t\troot[\"match\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"match\"] = factory();\n\telse\n\t\troot[\"match\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t * @description lib-upload 通用的上传组件\r\n\t * @author luobata\r\n\t * @date 2017年1月7日14:46:03\r\n\t * */\r\n\t\r\n\tvar lib = __webpack_require__(1);\r\n\tvar lint = __webpack_require__(5);\r\n\tvar hack = __webpack_require__(2);\r\n\tvar uploadHtml = __webpack_require__(7);\r\n\tvar uploadSwf = __webpack_require__(8);\r\n\t\r\n\tvar upload = function (config) {\r\n\t    var conf = {\r\n\t        uploadUrl: '',\r\n\t        type: ['png', 'jpg', 'jpeg'],\r\n\t        method: 'POST',\r\n\t        id: '#upload',\r\n\t        fileName: 'image',\r\n\t        min: 50 * 1024,\r\n\t        max: 2.5 * 1024 * 1024,\r\n\t        credentials: true,\r\n\t        isMultiple: false,\r\n\t        beforeUpload: function () {\r\n\t        },\r\n\t        fn: function (res) {\r\n\t            console.log('upload success');\r\n\t        },\r\n\t        progress: function (res) {\r\n\t        }\r\n\t    };\r\n\t    lib.extends(conf, config);\r\n\t    var dom = document.querySelector(conf.id);\r\n\t    if (!lint(conf)) {\r\n\t        console.log('缺少必要参数!');\r\n\t        return;\r\n\t    }\r\n\t    if (window.File) {\r\n\t        // file 对象 fn 回调 tokenUrl 获取token的\r\n\t        uploadHtml(dom, conf);\r\n\t    } else {\r\n\t        // input file的父元素 上传地址 回调\r\n\t        hack(conf);\r\n\t        uploadSwf(dom, conf);\r\n\t    }\r\n\t};\r\n\t\r\n\tif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\r\n\t    module.exports = upload;\r\n\t} else {\r\n\t    window.upload = upload;\r\n\t}\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\tvar lib = {\r\n\t    extends: function (source, target) {\r\n\t        for (var k in target) {\r\n\t            if (lib.isObject(target[k]) && lib.isObject(source[k])) {\r\n\t                lib.extends(source[k], target[k]);\r\n\t            } else {\r\n\t                source[k] = target[k];\r\n\t            }\r\n\t        }\r\n\t        return source;\r\n\t    },\r\n\t    clone: function (obj) {\r\n\t        var o;  \r\n\t        if (typeof obj === \"object\") {  \r\n\t            if (obj === null) {  \r\n\t                o = null;  \r\n\t            } else {  \r\n\t                if (obj instanceof Array) {  \r\n\t                    o = [];  \r\n\t                    for (var i = 0, len = obj.length; i < len; i++) {  \r\n\t                        o.push(this.clone(obj[i]));  \r\n\t                    }  \r\n\t                } else {  \r\n\t                    o = {};  \r\n\t                    for (var j in obj) {  \r\n\t                        o[j] = this.clone(obj[j]);  \r\n\t                    }  \r\n\t                }  \r\n\t            }  \r\n\t        } else {  \r\n\t            o = obj;  \r\n\t        }  \r\n\t        return o;\r\n\t    },\r\n\t    isObject: function (obj) {\r\n\t        return typeof obj === 'object' && !(obj instanceof Array);\r\n\t    },\r\n\t    queryString: function (object) {\r\n\t        var data = [];\r\n\t        var key, val;\r\n\t        for (key in object) {\r\n\t            if (object.hasOwnProperty(key)) {\r\n\t                val = object[key];\r\n\t                data.push(key + '=' + encodeURIComponent(val));\r\n\t            }\r\n\t        }\r\n\t        return data.join('&');\r\n\t    },\r\n\t    getRandomString: function (len) {\r\n\t        len = len || 32;\r\n\t        var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\r\n\t        var maxPos = $chars.length;\r\n\t        var pwd = '';\r\n\t        for (var i = 0; i < len; i++) {\r\n\t            pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n\t        }\r\n\t        return pwd;\r\n\t    },\r\n\t    getWidth: function (dom) {\r\n\t        return dom.offsetWidth;\r\n\t    },\r\n\t    getHeight: function (dom) {\r\n\t        return dom.offsetHeight;\r\n\t    },\r\n\t    prepend: function (dom, html) {\r\n\t        dom.innerHTML = html + dom.innerHTML;\r\n\t    },\r\n\t    css: function (dom, sty, newSty) {\r\n\t        if (!newSty) {\r\n\t            return dom.style[sty];\r\n\t        } else {\r\n\t            dom.style[sty] = newSty;\r\n\t            return dom;\r\n\t        }\r\n\t    }\r\n\t};\r\n\t\r\n\tmodule.exports = lib;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\tvar hack = function (conf) {\r\n\t    var success = conf.fn;\r\n\t    conf.fn = function (res, file) {\r\n\t        if (res === -110) {\r\n\t            res = {\r\n\t                error: '图片大小不符合要求'\r\n\t            };\r\n\t        }\r\n\t        success.call(this, res, file);\r\n\t    };\r\n\t};\r\n\t\r\n\tmodule.exports = hack;\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tvar lint = function (conf) {\r\n\t    var lintFile = {};\r\n\t    if (conf.url) {\r\n\t        lintFile.error = '缺少参数url';\r\n\t    }\r\n\t    return lintFile;\r\n\t};\r\n\t\r\n\tmodule.exports = function (conf) {\r\n\t    var that = this;\r\n\t    var lintFile = lint(conf);\r\n\t    var xhr = new XMLHttpRequest();\r\n\t    if (lint.error && conf.fn && typeof conf.fn === 'function') {\r\n\t        conf.fn(lintFile);\r\n\t        return;\r\n\t    }\r\n\t    if (xhr.upload) {\r\n\t        if (conf.progress && typeof conf.progress === 'function') {\r\n\t            (function (conf) {\r\n\t                xhr.upload.onprogress = function (event) {\r\n\t                    if (event.lengthComputable) {\r\n\t                        var percentComplete = event.loaded / event.total;\r\n\t                        conf.progress(conf.file, percentComplete);\r\n\t                    }\r\n\t                };\r\n\t            })(conf)\r\n\t        }\r\n\t\r\n\t\r\n\t        // 开始上传\r\n\t        xhr.open(conf.method, conf.uploadUrl, true);\r\n\t        xhr.setRequestHeader('Accept', '*/*');\r\n\t        xhr.withCredentials = conf.credentials;\r\n\t        xhr.onreadystatechange = function (e) {\r\n\t            if (xhr.readyState === 4) {\r\n\t                if (xhr.status === 200) {\r\n\t                    typeof conf.fn === 'function' && conf.fn(JSON.parse(xhr.response), conf.file);\r\n\t                } else {\r\n\t                    conf.fn({\r\n\t                        error: '上传失败' + xhr.responseText\r\n\t                    });\r\n\t                }\r\n\t            }\r\n\t        };\r\n\t        xhr.send(conf.data);\r\n\t    }\r\n\t};\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\r\n\t    typeFormat: function (typeArray) {\r\n\t        if (typeArray === '*') return '*';\r\n\t        if (!typeArray || !typeArray.length) return '';\r\n\t        typeArray.forEach(function (item, index) {\r\n\t            typeArray[index] = '*.' + item;\r\n\t        });\r\n\t        return typeArray.join(';');\r\n\t    },\r\n\t    sizeFormat: function (size) {\r\n\t        if (!size || !parseFloat(size, 10)) return '0B';\r\n\t        var unit = 'B';\r\n\t        var hihgUnit = function (unit) {\r\n\t            var unitUp = 'B';\r\n\t            switch (unit) {\r\n\t                case 'B':\r\n\t                    unitUp = 'KB';\r\n\t                    break;\r\n\t                case 'KB':\r\n\t                    unitUp = 'MB';\r\n\t                    break;\r\n\t                case 'MB':\r\n\t                    unitUp = 'GB';\r\n\t                    break;\r\n\t                case 'GB':\r\n\t                    unitUp = 'TB';\r\n\t                    break;\r\n\t            }\r\n\t            return unitUp;\r\n\t        };\r\n\t        var size = parseInt(size, 10);\r\n\t        while (size > 1024) {\r\n\t            unit = hihgUnit(unit);\r\n\t            size = parseFloat(size / 1024, 10);\r\n\t        }\r\n\t        return size + ' ' + unit;\r\n\t    }\r\n\t};\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = function (conf) {\r\n\t    if (!conf.uploadUrl || !conf.id || !conf.fn) {\r\n\t        return false;\r\n\t    }\r\n\t\r\n\t    return true;\r\n\t};\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\t\r\n\t/*   \r\n\t *   A   JavaScript   implementation   of   the   Secure   Hash   Algorithm,   SHA-1,   as   defined   \r\n\t *   in   FIPS   PUB   180-1   \r\n\t *   Version   2.1-BETA   Copyright   Paul   Johnston   2000   -   2002.   \r\n\t *   Other   contributors:   Greg   Holt,   Andrew   Kepert,   Ydnar,   Lostinet   \r\n\t *   Distributed   under   the   BSD   License   \r\n\t *   See   http://pajhome.org.uk/crypt/md5   for   details.   \r\n\t */\r\n\t/*   \r\n\t *   Configurable   variables.   You   may   need   to   tweak   these   to   be   compatible   with   \r\n\t *   the   server-side,   but   the   defaults   work   in   most   cases.   \r\n\t */\r\n\tvar hexcase = 0; /*   hex   output   format.   0   -   lowercase;   1   -   uppercase                 */\r\n\tvar b64pad = \"\"; /*   base-64   pad   character.   \"=\"   for   strict   RFC   compliance       */\r\n\tvar chrsz = 8; /*   bits   per   input   character.   8   -   ASCII;   16   -   Unicode             */\r\n\t\r\n\t/*   \r\n\t *   These   are   the   functions   you'll   usually   want   to   call   \r\n\t *   They   take   string   arguments   and   return   either   hex   or   base-64   encoded   strings   \r\n\t */\r\n\tfunction hex_sha1(s) {\r\n\t    return binb2hex(core_sha1(str2binb(s), s.length * chrsz));\r\n\t}\r\n\t\r\n\tfunction b64_sha1(s) {\r\n\t    return binb2b64(core_sha1(str2binb(s), s.length * chrsz));\r\n\t}\r\n\t\r\n\tfunction str_sha1(s) {\r\n\t    return binb2str(core_sha1(str2binb(s), s.length * chrsz));\r\n\t}\r\n\t\r\n\tfunction hex_hmac_sha1(key, data) {\r\n\t    return binb2hex(core_hmac_sha1(key, data));\r\n\t}\r\n\t\r\n\tfunction b64_hmac_sha1(key, data) {\r\n\t    return binb2b64(core_hmac_sha1(key, data));\r\n\t}\r\n\t\r\n\tfunction str_hmac_sha1(key, data) {\r\n\t    return binb2str(core_hmac_sha1(key, data));\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Perform   a   simple   self-test   to   see   if   the   VM   is   working   \r\n\t */\r\n\tfunction sha1_vm_test() {\r\n\t    return hex_sha1(\"abc\") == \"a9993e364706816aba3e25717850c26c9cd0d89d\";\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Calculate   the   SHA-1   of   an   array   of   big-endian   words,   and   a   bit   length   \r\n\t */\r\n\tfunction core_sha1(x, len) {\r\n\t    /*   append   padding   */\r\n\t    x[len >> 5] |= 0x80 << (24 - len % 32);\r\n\t    x[((len + 64 >> 9) << 4) + 15] = len;\r\n\t\r\n\t    var w = Array(80);\r\n\t    var a = 1732584193;\r\n\t    var b = -271733879;\r\n\t    var c = -1732584194;\r\n\t    var d = 271733878;\r\n\t    var e = -1009589776;\r\n\t\r\n\t    for (var i = 0; i < x.length; i += 16) {\r\n\t        var olda = a;\r\n\t        var oldb = b;\r\n\t        var oldc = c;\r\n\t        var oldd = d;\r\n\t        var olde = e;\r\n\t\r\n\t        for (var j = 0; j < 80; j++) {\r\n\t            if (j < 16) w[j] = x[i + j];\r\n\t            else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\r\n\t            var t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));\r\n\t            e = d;\r\n\t            d = c;\r\n\t            c = rol(b, 30);\r\n\t            b = a;\r\n\t            a = t;\r\n\t        }\r\n\t\r\n\t        a = safe_add(a, olda);\r\n\t        b = safe_add(b, oldb);\r\n\t        c = safe_add(c, oldc);\r\n\t        d = safe_add(d, oldd);\r\n\t        e = safe_add(e, olde);\r\n\t    }\r\n\t    return Array(a, b, c, d, e);\r\n\t\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Perform   the   appropriate   triplet   combination   function   for   the   current   \r\n\t *   iteration   \r\n\t */\r\n\tfunction sha1_ft(t, b, c, d) {\r\n\t    if (t < 20) return (b & c) | ((~b) & d);\r\n\t    if (t < 40) return b ^ c ^ d;\r\n\t    if (t < 60) return (b & c) | (b & d) | (c & d);\r\n\t    return b ^ c ^ d;\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Determine   the   appropriate   additive   constant   for   the   current   iteration   \r\n\t */\r\n\tfunction sha1_kt(t) {\r\n\t    return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514;\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Calculate   the   HMAC-SHA1   of   a   key   and   some   data   \r\n\t */\r\n\tfunction core_hmac_sha1(key, data) {\r\n\t    var bkey = str2binb(key);\r\n\t    if (bkey.length > 16) bkey = core_sha1(bkey, key.length * chrsz);\r\n\t\r\n\t    var ipad = Array(16),\r\n\t        opad = Array(16);\r\n\t    for (var i = 0; i < 16; i++) {\r\n\t        ipad[i] = bkey[i] ^ 0x36363636;\r\n\t        opad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n\t    }\r\n\t\r\n\t    var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * chrsz);\r\n\t    return core_sha1(opad.concat(hash), 512 + 160);\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Add   integers,   wrapping   at   2^32.   This   uses   16-bit   operations   internally   \r\n\t *   to   work   around   bugs   in   some   JS   interpreters.   \r\n\t */\r\n\tfunction safe_add(x, y) {\r\n\t    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n\t    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n\t    return (msw << 16) | (lsw & 0xFFFF);\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Bitwise   rotate   a   32-bit   number   to   the   left.   \r\n\t */\r\n\tfunction rol(num, cnt) {\r\n\t    return (num << cnt) | (num >>> (32 - cnt));\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Convert   an   8-bit   or   16-bit   string   to   an   array   of   big-endian   words   \r\n\t *   In   8-bit   function,   characters   >255   have   their   hi-byte   silently   ignored.   \r\n\t */\r\n\tfunction str2binb(str) {\r\n\t    var bin = Array();\r\n\t    var mask = (1 << chrsz) - 1;\r\n\t    for (var i = 0; i < str.length * chrsz; i += chrsz)\r\n\t        bin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (24 - i % 32);\r\n\t    return bin;\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Convert   an   array   of   big-endian   words   to   a   string   \r\n\t */\r\n\tfunction binb2str(bin) {\r\n\t    var str = \"\";\r\n\t    var mask = (1 << chrsz) - 1;\r\n\t    for (var i = 0; i < bin.length * 32; i += chrsz)\r\n\t        str += String.fromCharCode((bin[i >> 5] >>> (24 - i % 32)) & mask);\r\n\t    return str;\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Convert   an   array   of   big-endian   words   to   a   hex   string.   \r\n\t */\r\n\tfunction binb2hex(binarray) {\r\n\t    var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n\t    var str = \"\";\r\n\t    for (var i = 0; i < binarray.length * 4; i++) {\r\n\t        str += hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF);\r\n\t    }\r\n\t    return str;\r\n\t}\r\n\t\r\n\t/*   \r\n\t *   Convert   an   array   of   big-endian   words   to   a   base-64   string   \r\n\t */\r\n\tfunction binb2b64(binarray) {\r\n\t    var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\t    var str = \"\";\r\n\t    for (var i = 0; i < binarray.length * 4; i += 3) {\r\n\t        var triplet = (((binarray[i >> 2] >> 8 * (3 - i % 4)) & 0xFF) << 16) | (((binarray[i + 1 >> 2] >> 8 * (3 - (i + 1) % 4)) & 0xFF) << 8) | ((binarray[i + 2 >> 2] >> 8 * (3 - (i + 2) % 4)) & 0xFF);\r\n\t        for (var j = 0; j < 4; j++) {\r\n\t            if (i * 8 + j * 6 > binarray.length * 32) str += b64pad;\r\n\t            else str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);\r\n\t        }\r\n\t    }\r\n\t    return str;\r\n\t}\r\n\t\r\n\tmodule.exports = hex_sha1;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar hex_sha1 = __webpack_require__(6);\r\n\tvar lib = __webpack_require__(1);\r\n\tvar ajax = __webpack_require__(3);\r\n\tvar time;\r\n\t\r\n\tvar lint = function (file, conf) {\r\n\t    var result = {\r\n\t        error: '',\r\n\t        errorType: 0\r\n\t    };\r\n\t    var type = result.type = file.name.split('.').pop().toLowerCase();\r\n\t    var name = result.name = lib.getRandomString(32) + '.' + type;\r\n\t\r\n\t    if (file.size < conf.min || file.size > conf.max) {\r\n\t        result.error = '图片大小不符合要求!';\r\n\t        result.errorType = 1;\r\n\t    }\r\n\t\r\n\t    if (conf.type === '*') {\r\n\t        return result;\r\n\t    }\r\n\t\r\n\t    if (conf.type.indexOf(type) === -1) {\r\n\t        result.error = '图片类型错误!';\r\n\t        result.errorType = result.errorType ? 3 : 2;\r\n\t        return result;\r\n\t    }\r\n\t\r\n\t    return result;\r\n\t};\r\n\t\r\n\tvar uploadAjax = function (file, name, conf) {\r\n\t    var formData = new FormData();\r\n\t    var uploadData = {\r\n\t        name: conf.fileName,\r\n\t        file: file\r\n\t    };\r\n\t    conf.file = file;\r\n\t    formData.append(conf.fileName, file);\r\n\t    conf.data = formData;\r\n\t    ajax(conf);\r\n\t};\r\n\t\r\n\tvar beforeUpload = function (dom, conf) {\r\n\t    if (lib.css(dom, 'position') === 'static' || lib.css(dom, 'position') === '') {\r\n\t        lib.css(dom, 'position', 'relative');\r\n\t    }\r\n\t    var isMulti = conf.isMultiple ? 'multiple' : '';\r\n\t    var input = '<input type=\"file\"' + isMulti + ' style=\"position: absolute; width: 100%; height: 100%; opacity: 0; filter: alpha(opacity=0); cursor: pointer; top: 0; left: 0; z-index: 100;\" name=\"\" />';\r\n\t    lib.prepend(dom, input);\r\n\t    var uploadDom = dom.querySelector('input');\r\n\t    dom.addEventListener('change', function (e) {\r\n\t\t\tvar file = e.target.files;\r\n\t\t\tvar i;\r\n\t\t\tvar item;\r\n\t        var errors = [];\r\n\t        var error = '';\r\n\t\r\n\t        for (i = 0; i < file.length; i++) {\r\n\t            item = file[i];\r\n\t            errors[i] = lint(item, conf).errorType;\r\n\t        }\r\n\t        if (errors.indexOf(1) !== -1 || errors.indexOf(3) !== -1) {\r\n\t            error += '图片大小不符合要求';\r\n\t        }\r\n\t        if (errors.indexOf(2) !== -1 || errors.indexOf(3) !== -1) {\r\n\t            if (error) error += '、';\r\n\t            error += '图片格式不符合要求';\r\n\t        }\r\n\t        if (error) {\r\n\t            conf.fn({error: error});\r\n\t            return;\r\n\t        }\r\n\t\t\tfor (i = 0; i < file.length; i++) {\r\n\t\t\t\titem = file[i];\r\n\t\t\t\tvar lintFile = lint(item, conf);\r\n\t\t\t\t// hack onchange\r\n\t\t\t\t(function () {\r\n\t\t\t\t\tvar success = conf.fn;\r\n\t\t\t\t\tconf.fn = function (res, file) {\r\n\t\t\t\t\t\tsuccess.call(this, res, file);\r\n\t\t\t\t\t\tuploadDom.value = '';\r\n\t\t\t\t\t};\r\n\t\t\t\t}());\r\n\t\t\t\tconf.beforeUpload && conf.beforeUpload(item);\r\n\t\t\t\tuploadAjax(item, lintFile.name, lib.clone(conf));\r\n\t\t\t}\r\n\t    });\r\n\t};\r\n\t\r\n\tmodule.exports = beforeUpload;\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar loading = false;\r\n\tvar initList = [];\r\n\tvar resBase = 'http://changyan.itc.cn/mdevp/extensions/cui/002/swfupload.v2.2.0/';\r\n\tvar lib = __webpack_require__(1);\r\n\tvar format = __webpack_require__(4);\r\n\t\r\n\tvar setting = {\r\n\t    flash_url: resBase + 'swfupload.swf',\r\n\t    prevent_swf_caching: false,\r\n\t\r\n\t    file_size_limit: '1 MB',\r\n\t    file_post_name: 'file',\r\n\t    file_types: '*.jpg;*.png;*.gif;*.jpeg',\r\n\t\r\n\t    button_text: '',\r\n\t    button_image_url: resBase + 'swfupload.js?button_image_url',\r\n\t};\r\n\tvar id = 0;\r\n\t\r\n\tfunction upload(dom, conf) {\r\n\t    if (dom) {\r\n\t        uploader.config({\r\n\t            file_size_limit: format.sizeFormat(conf.max),\r\n\t            file_size_limit: conf.max + 'B',\r\n\t            file_post_name: conf.fileName,\r\n\t            file_types: format.typeFormat(conf.type),\r\n\t            upload_progress_handler: conf.progress,\r\n\t            button_placeholder_id: 'selectFiles4'\r\n\t        });\r\n\t        conf.id = id++;\r\n\t        var fn = conf.fn;\r\n\t        conf.fn = function (response, file) {\r\n\t            if (typeof response === 'string') response = JSON.parse(response);\r\n\t            fn.apply(this, arguments);\r\n\t        }\r\n\t        uploader.create(dom, conf);\r\n\t        return;\r\n\t        uploader.create(dom, conf.uploadUrl, function (response, file, conf) {\r\n\t            if (typeof response === 'string') response = JSON.parse(response);\r\n\t            conf.fn(response, file);\r\n\t        }, conf);\r\n\t    }\r\n\t};\r\n\tvar fnLoadScript = function (src, fun) {\r\n\t    var head = document.getElementsByTagName('head')[0] || document.head || document.documentElement;\r\n\t\r\n\t    var script = document.createElement('script');\r\n\t    script.setAttribute('type', 'text/javascript');\r\n\t    script.setAttribute('charset', 'UTF-8');\r\n\t    script.setAttribute('src', src);\r\n\t\r\n\t    if (typeof fun === 'function') {\r\n\t        if (window.attachEvent) {\r\n\t            script.onreadystatechange = function () {\r\n\t                var r = script.readyState;\r\n\t                if (r === 'loaded' || r === 'complete') {\r\n\t                    script.onreadystatechange = null;\r\n\t                    fun();\r\n\t                }\r\n\t            };\r\n\t        } else {\r\n\t            script.onload = fun;\r\n\t        }\r\n\t    }\r\n\t\r\n\t    head.appendChild(script);\r\n\t};\r\n\tvar fnInit = function ($dom, conf) {\r\n\t    var height = lib.getHeight($dom);\r\n\t    var width = lib.getWidth($dom);\r\n\t\r\n\t    if (lib.css($dom, 'position') === 'static' || lib.css($dom, 'position') === '') {\r\n\t        lib.css($dom, 'position', 'relative');\r\n\t    }\r\n\t    var id = 'id-' + (+new Date());\r\n\t    var html = '\\\r\n\t            <span style=\"position: absolute; top: 0; left: 0; height: ' + height + 'px; width: ' + width + 'px; overflow: hidden; opacity: 0; filter:alpha(opacity=0); z-index: 100;\">\\\r\n\t                <span  id=\"' + id + '\"></span>\\\r\n\t            </span>\\\r\n\t        ';\r\n\t    lib.prepend($dom, html);\r\n\t\r\n\t    var _setting = lib.extends(setting, {\r\n\t        upload_url: conf.uploadUrl,\r\n\t        button_placeholder_id: id,\r\n\t        button_width: width,\r\n\t        button_height: height,\r\n\t        button_cursor: SWFUpload.CURSOR.HAND,\r\n\t        button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,\r\n\t        conf: conf,\r\n\t        upload_start_handler: function () {\r\n\t            this.settings.conf.beforeUpload()\r\n\t        },\r\n\t        file_dialog_complete_handler: function () {\r\n\t            this.startUpload();\r\n\t        },\r\n\t        file_queue_error_handler: function (a, b, c) {\r\n\t            this.settings.conf.fn(b, c);\r\n\t        },\r\n\t        upload_success_handler: function (a, b, c) {\r\n\t            this.settings.conf.fn(b, a);\r\n\t        }\r\n\t    });\r\n\t\r\n\t    var tmp = new SWFUpload(lib.clone(_setting));\r\n\t};\r\n\tvar uploader = {\r\n\t    create: function ($dom, conf) {\r\n\t        if (window.SWFUpload) {\r\n\t            fnInit($dom, conf);\r\n\t        } else {\r\n\t            initList.push([$dom, conf]);\r\n\t\r\n\t            if (loading) {\r\n\t                return;\r\n\t            }\r\n\t\r\n\t            loading = true;\r\n\t            fnLoadScript(resBase + 'swfupload.js', function () {\r\n\t                loading = false;\r\n\t\r\n\t                var i, item;\r\n\t                for (i = 0; i < initList.length; i++) {\r\n\t                    item = initList[i];\r\n\t                    fnInit(item[0], item[1]);\r\n\t                }\r\n\t                initList = [];\r\n\t            });\r\n\t        }\r\n\t    },\r\n\t    config: function (paramsConfig) {\r\n\t        lib.extends(setting, paramsConfig);\r\n\t    }\r\n\t};\r\n\tmodule.exports = upload;\r\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c63030b019b8d34412b7","/*\r\n * @description lib-upload 通用的上传组件\r\n * @author luobata\r\n * @date 2017年1月7日14:46:03\r\n * */\r\n\r\nvar lib = require('./lib/lib');\r\nvar lint = require('./lib/lint');\r\nvar hack = require('./hack');\r\nvar uploadHtml = require('./upload-html');\r\nvar uploadSwf = require('./upload-swf');\r\n\r\nvar upload = function (config) {\r\n    var conf = {\r\n        uploadUrl: '',\r\n        type: ['png', 'jpg', 'jpeg'],\r\n        method: 'POST',\r\n        id: '#upload',\r\n        fileName: 'image',\r\n        min: 50 * 1024,\r\n        max: 2.5 * 1024 * 1024,\r\n        credentials: true,\r\n        isMultiple: false,\r\n        beforeUpload: function () {\r\n        },\r\n        fn: function (res) {\r\n            console.log('upload success');\r\n        },\r\n        progress: function (res) {\r\n        }\r\n    };\r\n    lib.extends(conf, config);\r\n    var dom = document.querySelector(conf.id);\r\n    if (!lint(conf)) {\r\n        console.log('缺少必要参数!');\r\n        return;\r\n    }\r\n    if (window.File) {\r\n        // file 对象 fn 回调 tokenUrl 获取token的\r\n        uploadHtml(dom, conf);\r\n    } else {\r\n        // input file的父元素 上传地址 回调\r\n        hack(conf);\r\n        uploadSwf(dom, conf);\r\n    }\r\n};\r\n\r\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\r\n    module.exports = upload;\r\n} else {\r\n    window.upload = upload;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 0\n// module chunks = 0","var lib = {\r\n    extends: function (source, target) {\r\n        for (var k in target) {\r\n            if (lib.isObject(target[k]) && lib.isObject(source[k])) {\r\n                lib.extends(source[k], target[k]);\r\n            } else {\r\n                source[k] = target[k];\r\n            }\r\n        }\r\n        return source;\r\n    },\r\n    clone: function (obj) {\r\n        var o;  \r\n        if (typeof obj === \"object\") {  \r\n            if (obj === null) {  \r\n                o = null;  \r\n            } else {  \r\n                if (obj instanceof Array) {  \r\n                    o = [];  \r\n                    for (var i = 0, len = obj.length; i < len; i++) {  \r\n                        o.push(this.clone(obj[i]));  \r\n                    }  \r\n                } else {  \r\n                    o = {};  \r\n                    for (var j in obj) {  \r\n                        o[j] = this.clone(obj[j]);  \r\n                    }  \r\n                }  \r\n            }  \r\n        } else {  \r\n            o = obj;  \r\n        }  \r\n        return o;\r\n    },\r\n    isObject: function (obj) {\r\n        return typeof obj === 'object' && !(obj instanceof Array);\r\n    },\r\n    queryString: function (object) {\r\n        var data = [];\r\n        var key, val;\r\n        for (key in object) {\r\n            if (object.hasOwnProperty(key)) {\r\n                val = object[key];\r\n                data.push(key + '=' + encodeURIComponent(val));\r\n            }\r\n        }\r\n        return data.join('&');\r\n    },\r\n    getRandomString: function (len) {\r\n        len = len || 32;\r\n        var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\r\n        var maxPos = $chars.length;\r\n        var pwd = '';\r\n        for (var i = 0; i < len; i++) {\r\n            pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n        }\r\n        return pwd;\r\n    },\r\n    getWidth: function (dom) {\r\n        return dom.offsetWidth;\r\n    },\r\n    getHeight: function (dom) {\r\n        return dom.offsetHeight;\r\n    },\r\n    prepend: function (dom, html) {\r\n        dom.innerHTML = html + dom.innerHTML;\r\n    },\r\n    css: function (dom, sty, newSty) {\r\n        if (!newSty) {\r\n            return dom.style[sty];\r\n        } else {\r\n            dom.style[sty] = newSty;\r\n            return dom;\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = lib;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/lib.js\n// module id = 1\n// module chunks = 0","var hack = function (conf) {\r\n    var success = conf.fn;\r\n    conf.fn = function (res, file) {\r\n        if (res === -110) {\r\n            res = {\r\n                error: '图片大小不符合要求'\r\n            };\r\n        }\r\n        success.call(this, res, file);\r\n    };\r\n};\r\n\r\nmodule.exports = hack;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/hack.js\n// module id = 2\n// module chunks = 0","var lint = function (conf) {\r\n    var lintFile = {};\r\n    if (conf.url) {\r\n        lintFile.error = '缺少参数url';\r\n    }\r\n    return lintFile;\r\n};\r\n\r\nmodule.exports = function (conf) {\r\n    var that = this;\r\n    var lintFile = lint(conf);\r\n    var xhr = new XMLHttpRequest();\r\n    if (lint.error && conf.fn && typeof conf.fn === 'function') {\r\n        conf.fn(lintFile);\r\n        return;\r\n    }\r\n    if (xhr.upload) {\r\n        if (conf.progress && typeof conf.progress === 'function') {\r\n            (function (conf) {\r\n                xhr.upload.onprogress = function (event) {\r\n                    if (event.lengthComputable) {\r\n                        var percentComplete = event.loaded / event.total;\r\n                        conf.progress(conf.file, percentComplete);\r\n                    }\r\n                };\r\n            })(conf)\r\n        }\r\n\r\n\r\n        // 开始上传\r\n        xhr.open(conf.method, conf.uploadUrl, true);\r\n        xhr.setRequestHeader('Accept', '*/*');\r\n        xhr.withCredentials = conf.credentials;\r\n        xhr.onreadystatechange = function (e) {\r\n            if (xhr.readyState === 4) {\r\n                if (xhr.status === 200) {\r\n                    typeof conf.fn === 'function' && conf.fn(JSON.parse(xhr.response), conf.file);\r\n                } else {\r\n                    conf.fn({\r\n                        error: '上传失败' + xhr.responseText\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        xhr.send(conf.data);\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/ajax.js\n// module id = 3\n// module chunks = 0","module.exports = {\r\n    typeFormat: function (typeArray) {\r\n        if (typeArray === '*') return '*';\r\n        if (!typeArray || !typeArray.length) return '';\r\n        typeArray.forEach(function (item, index) {\r\n            typeArray[index] = '*.' + item;\r\n        });\r\n        return typeArray.join(';');\r\n    },\r\n    sizeFormat: function (size) {\r\n        if (!size || !parseFloat(size, 10)) return '0B';\r\n        var unit = 'B';\r\n        var hihgUnit = function (unit) {\r\n            var unitUp = 'B';\r\n            switch (unit) {\r\n                case 'B':\r\n                    unitUp = 'KB';\r\n                    break;\r\n                case 'KB':\r\n                    unitUp = 'MB';\r\n                    break;\r\n                case 'MB':\r\n                    unitUp = 'GB';\r\n                    break;\r\n                case 'GB':\r\n                    unitUp = 'TB';\r\n                    break;\r\n            }\r\n            return unitUp;\r\n        };\r\n        var size = parseInt(size, 10);\r\n        while (size > 1024) {\r\n            unit = hihgUnit(unit);\r\n            size = parseFloat(size / 1024, 10);\r\n        }\r\n        return size + ' ' + unit;\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/format.js\n// module id = 4\n// module chunks = 0","module.exports = function (conf) {\r\n    if (!conf.uploadUrl || !conf.id || !conf.fn) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/lint.js\n// module id = 5\n// module chunks = 0","\r\n/*   \r\n *   A   JavaScript   implementation   of   the   Secure   Hash   Algorithm,   SHA-1,   as   defined   \r\n *   in   FIPS   PUB   180-1   \r\n *   Version   2.1-BETA   Copyright   Paul   Johnston   2000   -   2002.   \r\n *   Other   contributors:   Greg   Holt,   Andrew   Kepert,   Ydnar,   Lostinet   \r\n *   Distributed   under   the   BSD   License   \r\n *   See   http://pajhome.org.uk/crypt/md5   for   details.   \r\n */\r\n/*   \r\n *   Configurable   variables.   You   may   need   to   tweak   these   to   be   compatible   with   \r\n *   the   server-side,   but   the   defaults   work   in   most   cases.   \r\n */\r\nvar hexcase = 0; /*   hex   output   format.   0   -   lowercase;   1   -   uppercase                 */\r\nvar b64pad = \"\"; /*   base-64   pad   character.   \"=\"   for   strict   RFC   compliance       */\r\nvar chrsz = 8; /*   bits   per   input   character.   8   -   ASCII;   16   -   Unicode             */\r\n\r\n/*   \r\n *   These   are   the   functions   you'll   usually   want   to   call   \r\n *   They   take   string   arguments   and   return   either   hex   or   base-64   encoded   strings   \r\n */\r\nfunction hex_sha1(s) {\r\n    return binb2hex(core_sha1(str2binb(s), s.length * chrsz));\r\n}\r\n\r\nfunction b64_sha1(s) {\r\n    return binb2b64(core_sha1(str2binb(s), s.length * chrsz));\r\n}\r\n\r\nfunction str_sha1(s) {\r\n    return binb2str(core_sha1(str2binb(s), s.length * chrsz));\r\n}\r\n\r\nfunction hex_hmac_sha1(key, data) {\r\n    return binb2hex(core_hmac_sha1(key, data));\r\n}\r\n\r\nfunction b64_hmac_sha1(key, data) {\r\n    return binb2b64(core_hmac_sha1(key, data));\r\n}\r\n\r\nfunction str_hmac_sha1(key, data) {\r\n    return binb2str(core_hmac_sha1(key, data));\r\n}\r\n\r\n/*   \r\n *   Perform   a   simple   self-test   to   see   if   the   VM   is   working   \r\n */\r\nfunction sha1_vm_test() {\r\n    return hex_sha1(\"abc\") == \"a9993e364706816aba3e25717850c26c9cd0d89d\";\r\n}\r\n\r\n/*   \r\n *   Calculate   the   SHA-1   of   an   array   of   big-endian   words,   and   a   bit   length   \r\n */\r\nfunction core_sha1(x, len) {\r\n    /*   append   padding   */\r\n    x[len >> 5] |= 0x80 << (24 - len % 32);\r\n    x[((len + 64 >> 9) << 4) + 15] = len;\r\n\r\n    var w = Array(80);\r\n    var a = 1732584193;\r\n    var b = -271733879;\r\n    var c = -1732584194;\r\n    var d = 271733878;\r\n    var e = -1009589776;\r\n\r\n    for (var i = 0; i < x.length; i += 16) {\r\n        var olda = a;\r\n        var oldb = b;\r\n        var oldc = c;\r\n        var oldd = d;\r\n        var olde = e;\r\n\r\n        for (var j = 0; j < 80; j++) {\r\n            if (j < 16) w[j] = x[i + j];\r\n            else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\r\n            var t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));\r\n            e = d;\r\n            d = c;\r\n            c = rol(b, 30);\r\n            b = a;\r\n            a = t;\r\n        }\r\n\r\n        a = safe_add(a, olda);\r\n        b = safe_add(b, oldb);\r\n        c = safe_add(c, oldc);\r\n        d = safe_add(d, oldd);\r\n        e = safe_add(e, olde);\r\n    }\r\n    return Array(a, b, c, d, e);\r\n\r\n}\r\n\r\n/*   \r\n *   Perform   the   appropriate   triplet   combination   function   for   the   current   \r\n *   iteration   \r\n */\r\nfunction sha1_ft(t, b, c, d) {\r\n    if (t < 20) return (b & c) | ((~b) & d);\r\n    if (t < 40) return b ^ c ^ d;\r\n    if (t < 60) return (b & c) | (b & d) | (c & d);\r\n    return b ^ c ^ d;\r\n}\r\n\r\n/*   \r\n *   Determine   the   appropriate   additive   constant   for   the   current   iteration   \r\n */\r\nfunction sha1_kt(t) {\r\n    return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514;\r\n}\r\n\r\n/*   \r\n *   Calculate   the   HMAC-SHA1   of   a   key   and   some   data   \r\n */\r\nfunction core_hmac_sha1(key, data) {\r\n    var bkey = str2binb(key);\r\n    if (bkey.length > 16) bkey = core_sha1(bkey, key.length * chrsz);\r\n\r\n    var ipad = Array(16),\r\n        opad = Array(16);\r\n    for (var i = 0; i < 16; i++) {\r\n        ipad[i] = bkey[i] ^ 0x36363636;\r\n        opad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n    }\r\n\r\n    var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * chrsz);\r\n    return core_sha1(opad.concat(hash), 512 + 160);\r\n}\r\n\r\n/*   \r\n *   Add   integers,   wrapping   at   2^32.   This   uses   16-bit   operations   internally   \r\n *   to   work   around   bugs   in   some   JS   interpreters.   \r\n */\r\nfunction safe_add(x, y) {\r\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n    return (msw << 16) | (lsw & 0xFFFF);\r\n}\r\n\r\n/*   \r\n *   Bitwise   rotate   a   32-bit   number   to   the   left.   \r\n */\r\nfunction rol(num, cnt) {\r\n    return (num << cnt) | (num >>> (32 - cnt));\r\n}\r\n\r\n/*   \r\n *   Convert   an   8-bit   or   16-bit   string   to   an   array   of   big-endian   words   \r\n *   In   8-bit   function,   characters   >255   have   their   hi-byte   silently   ignored.   \r\n */\r\nfunction str2binb(str) {\r\n    var bin = Array();\r\n    var mask = (1 << chrsz) - 1;\r\n    for (var i = 0; i < str.length * chrsz; i += chrsz)\r\n        bin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (24 - i % 32);\r\n    return bin;\r\n}\r\n\r\n/*   \r\n *   Convert   an   array   of   big-endian   words   to   a   string   \r\n */\r\nfunction binb2str(bin) {\r\n    var str = \"\";\r\n    var mask = (1 << chrsz) - 1;\r\n    for (var i = 0; i < bin.length * 32; i += chrsz)\r\n        str += String.fromCharCode((bin[i >> 5] >>> (24 - i % 32)) & mask);\r\n    return str;\r\n}\r\n\r\n/*   \r\n *   Convert   an   array   of   big-endian   words   to   a   hex   string.   \r\n */\r\nfunction binb2hex(binarray) {\r\n    var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n    var str = \"\";\r\n    for (var i = 0; i < binarray.length * 4; i++) {\r\n        str += hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) + hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF);\r\n    }\r\n    return str;\r\n}\r\n\r\n/*   \r\n *   Convert   an   array   of   big-endian   words   to   a   base-64   string   \r\n */\r\nfunction binb2b64(binarray) {\r\n    var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    var str = \"\";\r\n    for (var i = 0; i < binarray.length * 4; i += 3) {\r\n        var triplet = (((binarray[i >> 2] >> 8 * (3 - i % 4)) & 0xFF) << 16) | (((binarray[i + 1 >> 2] >> 8 * (3 - (i + 1) % 4)) & 0xFF) << 8) | ((binarray[i + 2 >> 2] >> 8 * (3 - (i + 2) % 4)) & 0xFF);\r\n        for (var j = 0; j < 4; j++) {\r\n            if (i * 8 + j * 6 > binarray.length * 32) str += b64pad;\r\n            else str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);\r\n        }\r\n    }\r\n    return str;\r\n}\r\n\r\nmodule.exports = hex_sha1;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/md5.js\n// module id = 6\n// module chunks = 0","var hex_sha1 = require('./md5.js');\r\nvar lib = require('./lib/lib');\r\nvar ajax = require('./lib/ajax');\r\nvar time;\r\n\r\nvar lint = function (file, conf) {\r\n    var result = {\r\n        error: '',\r\n        errorType: 0\r\n    };\r\n    var type = result.type = file.name.split('.').pop().toLowerCase();\r\n    var name = result.name = lib.getRandomString(32) + '.' + type;\r\n\r\n    if (file.size < conf.min || file.size > conf.max) {\r\n        result.error = '图片大小不符合要求!';\r\n        result.errorType = 1;\r\n    }\r\n\r\n    if (conf.type === '*') {\r\n        return result;\r\n    }\r\n\r\n    if (conf.type.indexOf(type) === -1) {\r\n        result.error = '图片类型错误!';\r\n        result.errorType = result.errorType ? 3 : 2;\r\n        return result;\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nvar uploadAjax = function (file, name, conf) {\r\n    var formData = new FormData();\r\n    var uploadData = {\r\n        name: conf.fileName,\r\n        file: file\r\n    };\r\n    conf.file = file;\r\n    formData.append(conf.fileName, file);\r\n    conf.data = formData;\r\n    ajax(conf);\r\n};\r\n\r\nvar beforeUpload = function (dom, conf) {\r\n    if (lib.css(dom, 'position') === 'static' || lib.css(dom, 'position') === '') {\r\n        lib.css(dom, 'position', 'relative');\r\n    }\r\n    var isMulti = conf.isMultiple ? 'multiple' : '';\r\n    var input = '<input type=\"file\"' + isMulti + ' style=\"position: absolute; width: 100%; height: 100%; opacity: 0; filter: alpha(opacity=0); cursor: pointer; top: 0; left: 0; z-index: 100;\" name=\"\" />';\r\n    lib.prepend(dom, input);\r\n    var uploadDom = dom.querySelector('input');\r\n    dom.addEventListener('change', function (e) {\r\n\t\tvar file = e.target.files;\r\n\t\tvar i;\r\n\t\tvar item;\r\n        var errors = [];\r\n        var error = '';\r\n\r\n        for (i = 0; i < file.length; i++) {\r\n            item = file[i];\r\n            errors[i] = lint(item, conf).errorType;\r\n        }\r\n        if (errors.indexOf(1) !== -1 || errors.indexOf(3) !== -1) {\r\n            error += '图片大小不符合要求';\r\n        }\r\n        if (errors.indexOf(2) !== -1 || errors.indexOf(3) !== -1) {\r\n            if (error) error += '、';\r\n            error += '图片格式不符合要求';\r\n        }\r\n        if (error) {\r\n            conf.fn({error: error});\r\n            return;\r\n        }\r\n\t\tfor (i = 0; i < file.length; i++) {\r\n\t\t\titem = file[i];\r\n\t\t\tvar lintFile = lint(item, conf);\r\n\t\t\t// hack onchange\r\n\t\t\t(function () {\r\n\t\t\t\tvar success = conf.fn;\r\n\t\t\t\tconf.fn = function (res, file) {\r\n\t\t\t\t\tsuccess.call(this, res, file);\r\n\t\t\t\t\tuploadDom.value = '';\r\n\t\t\t\t};\r\n\t\t\t}());\r\n\t\t\tconf.beforeUpload && conf.beforeUpload(item);\r\n\t\t\tuploadAjax(item, lintFile.name, lib.clone(conf));\r\n\t\t}\r\n    });\r\n};\r\n\r\nmodule.exports = beforeUpload;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/upload-html.js\n// module id = 7\n// module chunks = 0","var loading = false;\r\nvar initList = [];\r\nvar resBase = 'http://changyan.itc.cn/mdevp/extensions/cui/002/swfupload.v2.2.0/';\r\nvar lib = require('./lib/lib');\r\nvar format = require('./lib/format');\r\n\r\nvar setting = {\r\n    flash_url: resBase + 'swfupload.swf',\r\n    prevent_swf_caching: false,\r\n\r\n    file_size_limit: '1 MB',\r\n    file_post_name: 'file',\r\n    file_types: '*.jpg;*.png;*.gif;*.jpeg',\r\n\r\n    button_text: '',\r\n    button_image_url: resBase + 'swfupload.js?button_image_url',\r\n};\r\nvar id = 0;\r\n\r\nfunction upload(dom, conf) {\r\n    if (dom) {\r\n        uploader.config({\r\n            file_size_limit: format.sizeFormat(conf.max),\r\n            file_size_limit: conf.max + 'B',\r\n            file_post_name: conf.fileName,\r\n            file_types: format.typeFormat(conf.type),\r\n            upload_progress_handler: conf.progress,\r\n            button_placeholder_id: 'selectFiles4'\r\n        });\r\n        conf.id = id++;\r\n        var fn = conf.fn;\r\n        conf.fn = function (response, file) {\r\n            if (typeof response === 'string') response = JSON.parse(response);\r\n            fn.apply(this, arguments);\r\n        }\r\n        uploader.create(dom, conf);\r\n        return;\r\n        uploader.create(dom, conf.uploadUrl, function (response, file, conf) {\r\n            if (typeof response === 'string') response = JSON.parse(response);\r\n            conf.fn(response, file);\r\n        }, conf);\r\n    }\r\n};\r\nvar fnLoadScript = function (src, fun) {\r\n    var head = document.getElementsByTagName('head')[0] || document.head || document.documentElement;\r\n\r\n    var script = document.createElement('script');\r\n    script.setAttribute('type', 'text/javascript');\r\n    script.setAttribute('charset', 'UTF-8');\r\n    script.setAttribute('src', src);\r\n\r\n    if (typeof fun === 'function') {\r\n        if (window.attachEvent) {\r\n            script.onreadystatechange = function () {\r\n                var r = script.readyState;\r\n                if (r === 'loaded' || r === 'complete') {\r\n                    script.onreadystatechange = null;\r\n                    fun();\r\n                }\r\n            };\r\n        } else {\r\n            script.onload = fun;\r\n        }\r\n    }\r\n\r\n    head.appendChild(script);\r\n};\r\nvar fnInit = function ($dom, conf) {\r\n    var height = lib.getHeight($dom);\r\n    var width = lib.getWidth($dom);\r\n\r\n    if (lib.css($dom, 'position') === 'static' || lib.css($dom, 'position') === '') {\r\n        lib.css($dom, 'position', 'relative');\r\n    }\r\n    var id = 'id-' + (+new Date());\r\n    var html = '\\\r\n            <span style=\"position: absolute; top: 0; left: 0; height: ' + height + 'px; width: ' + width + 'px; overflow: hidden; opacity: 0; filter:alpha(opacity=0); z-index: 100;\">\\\r\n                <span  id=\"' + id + '\"></span>\\\r\n            </span>\\\r\n        ';\r\n    lib.prepend($dom, html);\r\n\r\n    var _setting = lib.extends(setting, {\r\n        upload_url: conf.uploadUrl,\r\n        button_placeholder_id: id,\r\n        button_width: width,\r\n        button_height: height,\r\n        button_cursor: SWFUpload.CURSOR.HAND,\r\n        button_window_mode: SWFUpload.WINDOW_MODE.TRANSPARENT,\r\n        conf: conf,\r\n        upload_start_handler: function () {\r\n            this.settings.conf.beforeUpload()\r\n        },\r\n        file_dialog_complete_handler: function () {\r\n            this.startUpload();\r\n        },\r\n        file_queue_error_handler: function (a, b, c) {\r\n            this.settings.conf.fn(b, c);\r\n        },\r\n        upload_success_handler: function (a, b, c) {\r\n            this.settings.conf.fn(b, a);\r\n        }\r\n    });\r\n\r\n    var tmp = new SWFUpload(lib.clone(_setting));\r\n};\r\nvar uploader = {\r\n    create: function ($dom, conf) {\r\n        if (window.SWFUpload) {\r\n            fnInit($dom, conf);\r\n        } else {\r\n            initList.push([$dom, conf]);\r\n\r\n            if (loading) {\r\n                return;\r\n            }\r\n\r\n            loading = true;\r\n            fnLoadScript(resBase + 'swfupload.js', function () {\r\n                loading = false;\r\n\r\n                var i, item;\r\n                for (i = 0; i < initList.length; i++) {\r\n                    item = initList[i];\r\n                    fnInit(item[0], item[1]);\r\n                }\r\n                initList = [];\r\n            });\r\n        }\r\n    },\r\n    config: function (paramsConfig) {\r\n        lib.extends(setting, paramsConfig);\r\n    }\r\n};\r\nmodule.exports = upload;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/upload-swf.js\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}